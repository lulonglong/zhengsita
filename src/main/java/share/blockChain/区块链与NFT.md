## 简介

**区块链**是借由密码学与共识机制等技术创建与存储庞大交易资料区块链的点对点网络系统。



## 历史

### 区块链1.0

​		中本聪在2008年于《比特币白皮书》[9]中提出“区块链”概念，并在2009年创立了比特币网络（英语：Bitcoin network），开发出第一个区块，即“创世区块”。

​		这一代区块链以BTC（比特币）、LTC（莱特币）、DOG（狗狗币）等。主要成就是搭建了一些可信任的分布式记账系统，价值载体和传递工具。各国的央行数字货币（CBDC），就是利用这代技术的实践和架构，创造出来的。

### 区块链2.0

​		这一代的标签是“智能合约”，为代表的链有ETH（以太坊）、BSC（币安链，仿ETH），TRON（波场，孙晨宇）、DOT、NEAR等

利用智能合约各区块链组织，搭建起形形色色的区块链项目，去中心化交易所、去中心化银行、去中心化保险、博彩、美股交易所等。

### 区块链3.0

​	在前两者之上，构建的更宏大的设想与未来，Web3.0，元宇宙。目前这代产品尚在探索，代表项目decentraland（欧美项目）、sand（香港项目，已上市）

## 技术

### 一代技术BTC

#### 数据结构

##### 链

![http://image.woshipm.com/wp-files/2018/05/xbMYHk3xYEx2vvxy6qZj.jpg](http://image.woshipm.com/wp-files/2018/05/xbMYHk3xYEx2vvxy6qZj.jpg)



##### 区块

![img](http://image.woshipm.com/wp-files/2018/05/AtcMoc9wnwc1hR3elozu.jpg)

下一个区块中，记录者上一个区块的哈希值，上一个区块的哈希值，是对整个区块头进行SHA-256哈希计算得出。



##### 交易请求体/交易记录

主要是交易的内容和对内容进行的签名

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%8C%BA%E5%9D%97%E9%93%BE%E4%BA%A4%E6%98%93%E8%AE%B0%E5%BD%95.jpg)



##### 实际记录的复杂性

实际的交易可能存在多输入多输出

 ![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%A4%8D%E6%9D%82%E4%BA%A4%E6%98%93.jpg)

​		

#### 关键过程或方案

##### 签名

​	用一个例子来展开这个问题，比如小黄、小青、小白、小皂四人合租，会把日常公帐写在客厅里的一个黑板上，每一项都由本人签名确认。

![https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%90%88%E7%A7%9F%EF%BC%88%E5%8C%BA%E5%9D%97%E9%93%BE%EF%BC%89.jpg](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%90%88%E7%A7%9F%EF%BC%88%E5%8C%BA%E5%9D%97%E9%93%BE%EF%BC%89.jpg)

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E8%B4%A6%E5%8D%95%E4%B8%8E%E7%AD%BE%E5%90%8D.jpg)



而区块链就像是一个分布式账单，它的核心内容也是记录这些资金流水，同样也需要数字签名来确定转账请求合法性。

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D.jpg)

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E7%AD%BE%E5%90%8D%E7%BB%86%E8%8A%82.jpg)



##### 矿工

​		区块链网络的网络节点，负责对转账/交易请求的验证，创建新区块，广播新区块到整个网络

##### 工作量证明

​		为了解决网络结点众多，保持所有节点数据的同步性，比特币限制全网节点每10分钟产生一个新区块。

由于所有节点都在接收请求与请求广播，那哪一个矿工拥有这个10分钟内的记账权那，就引入了一个工作量证明的方案。

即，10分钟内，谁先完成了一个哈希数学题，谁就得到了这个新区块的创建权限。

![https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E.jpg](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E.jpg)

![!(https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E2.jpg)](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E2.jpg)

如果全网算力提升到一定程度，这个算法难度就会提升，提升到前73，74，75，动态调节到大概10分钟能被一台矿机得到答案。10分钟内得到满足的随机数，就对新区块加入到链尾部，并把新区块广播到其他节点

![https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E3.jpg](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E3.jpg)

其他节点收到新区块后，会进行验证，验证过程跟上一步相同。



![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E5%8C%BA%E5%9D%97%E5%B9%B6%E5%8F%91.jpg)

​		这种工作量证明，是概率性方案，并不能严格保证10分钟内只有一个矿工找到匹配的随机数，所以存在着并发现象，虽然概率极低。

​		当出现10分钟内有两台矿机，都找到合适的随机数，区块链会同时保存两个新区块产生两个分支，直到分支角逐出最长的一个分支，另外一个分支则被抛弃。分支连续几个新区块都角逐不出最长，基本是不可能的，是天文数字分之一的概率。

​		在存在分支的情况下，新区块中的交易状态为“未确认”，安全起见，系统会在后续再产生几个新区块，才会设置前面的区块状态为确认。

##### 矿工奖励

​	![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E7%9F%BF%E5%B7%A5%E7%9A%84%E5%A5%96%E5%8A%B1.jpg)

比特币网络会对创建新区块的矿工进行奖励，即通过工作量证明获得记账权（创建新区块），并完成新区块创建和广播的节点。

新比特币无法主动铸造，只有比特币网络奖励这一个途径增量。且网络奖励，每四年进行一次减半，直至降为0。

所以比特币的总量不是无限量的，上限是2100万枚。

#### 比特币三个一致性问题

##### 1.新加入节点怎么同步

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%981.jpg)

新矿机，或者重启后的矿机，会从附近网络节点中获取自己没有的新区块。

##### 2.区块是怎么防止被篡改的那

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%982-1.jpg)

因为后一个区块中，记录了前一个区块整体进行哈希之后的哈希值，一旦一个区块被篡改，哈希结果值就会变化，就会造成后面区块的链断裂。

断裂之后，要么重新后面所有的区块，要么从锻炼处全新伪造新区块，一直生成的链超过真实链的长度。

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%982-2.jpg)



##### 3.如何防止双重支付问题，即1笔钱重复花两次

![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%983-1.jpg)

在交易/转账的函数中，存在两个值，输入值（前一笔交易），输出值（本次交易），程序会往前区块依次查找输入值使用情况，如果查找到被使用过，则此请求无效，不会加入到新区块中。



![](https://yit-integration.oss-cn-hangzhou.aliyuncs.com/CRM/TECH/%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%983-2.jpg)

如果在矿工制作新区块时，发现新区块中两笔交易中，有输入值有相同的“先前交易”，则程序只认为一个有效。



### 二代技术ETH

二代技术引入了智能合约，把传统商业行为程序化，自动化。

参见：https://learnblockchain.cn/books/geth/part1/config.html。

​		以太坊区块数据有三棵树，分别为状态树，交易树和收据树。整个以太坊系统中只有一棵状态树，记录整个以太坊系统的所有账户状态。每个区块保存着一棵交易树，记录该区块的交易情况，一棵收据树用来记录该区块的交易收据。 **状态树采用Merkel-Patrica(MPT)树，而交易树和收据树采用Merkel树。** 

![](https://ask.qcloudimg.com/http-save/yehe-2874029/ftdlzia2tf.png?imageView2/2/w/1620)

![](https://ask.qcloudimg.com/http-save/yehe-2874029/jinl9gjjn5.png?imageView2/2/w/1620)

​																			状态树



​		在交易/转账消息中，除有btc所拥有的信息外，又增加了合约字段。

大体流程是交易/转账消息中，以太坊会根据合约字段，找到合约代码（解析执行的js脚本），根据“输入”参数带入脚本执行。



## NFT

![](https://www.arcblock.io/blog/static/821d90601a9f09f1e46ee7d23a452feb/490e5/crypto-kitties.jpg)

### 基础概念

​		NFT 全称为 Non-FungibleToken, 中文名是非同质化通证。 是一种源于以太坊智能合约的非同质化通证，其作为独特的数字资产，具有不可分割、不可篡改、不可替代、独一无二等特性。

相对而言， FT(FungibleToken) 也就是同质化通证，以以太坊为例，每个以太坊都是同质化的，相互之间没有任何区别，且可以拆分成更小的单位。而每个 NFT 都拥有独特且唯一的标识，无法两两互换，也无法拆分。

NFT 以其独有的特性赋能各领域创作者，提供了一种更方便可靠的数字资产确权方式。创作者们可以很容易的通过 NFT 证明数字作品的存在性和所有权，包括但不仅限于图片、视频、艺术品、门票等形式。此外，创作者们还可以在每次 NFT 的交易流通过程中赚取版权税。

### 存储

NFT的元数据是存在链上的。

NFT的媒体数据（如图片）各家有不同的存储方案：

1.存储在主链上，数据比较小，比如像素类NFT。

2.存储在 IPFS 或者 Swarm 这样的分布式存储平台上（一种存储性区块链）。

3.直接存储在中心化服务器上（最不安全）。



### NFT的应用场景很多，几乎会充满想象力的空间。

#### **游戏**

NFT在游戏行业很流行，因为这些令牌解决了一些固有的问题。例如，用作游戏中的宠物，武器道具，服装和其他的物品。使用NFT，这些特性可以很容易在不同的游戏中转移和使用。因此，NFT可以帮助推动游戏中的经济。

#### **数字资产**

​		例如，Decentraland，在这里，参与者可以购买虚拟土地。另一个更接近家庭的例子是 ENS (Ethereum Name Service，以太坊域名服务) ，它使用NFT买卖.ETH的域名。

另外，数字艺术家已经接受了NFT来创造基于NFT 的艺术品。然而，NFT 有如此大的吸引力是因为艺术家们可以在 NFT 市场上获得的利润。值得注意的是，2020年下半年，数字艺术家以最高的价格出售他们的产品。例如，在2020年9月，一件随着比特币价格变化的 NFT 数字艺术品卖出了262 ETH (当时为101,100美元)。

#### **知识产权**

​		NFT 可以代表一幅画，一首歌，一项专利，一段影片，一张照片，或者其他的知识产权。在这个领域，NFT起到的是专利局的作用。帮助每一个独一无二的东西进行版权登记，帮助其识别专利。

实体资产。房屋等不动产等其他的实物资产，可以用NFT来表示进行代币化。可以用作资产的流通等金融市场。

#### **记录和身份证明**

​		NFT 可以用来验证身份和出生证明，驾照，学历证书，医疗记录等方面。这些可以用数字形式进行安全保存，而防止被滥用或篡改。Nft 是打击身份盗用的理想工具，可以被数字化以代表身份的例子甚至可以是我们的外表。

#### **金融**

​		发票，订单，保险，账单等可以转变为 NFT，进行交易。特别地，NFT 正开始与DeFi融合，例如，DeFi 协议Yearn Finance,为任何虚拟货币资产开发了一种名为 Y.Insure 的保险产品。Y.Insure 利用 NFT 机制(ERC-721)来代表保单的独特性质。基本上，当定义保险单的独特特征时，标准的 ERC-20通证就显得“没有意义”了。

DeFi目前是通过跨链来解决抵押，通过保证金制度来解决杠杆，最终实现了类似于信用衍生一样的操作。有了杠杆、有了抵押、有了资金池。金融最基本的东西都具备了，理论上什么复杂的衍生品都能设计出来的。

#### DAO凭证

​	DAO就像区块链圈的一个“黑社会组织”，“俱乐部”，“爱好联盟”，NFT代表着会员资格、圈内等级。



## 区块链项目



### 去中心化交易所

​		典型代表是Uniswap，以太坊上智能合约搭建的一个项目，项目团队在5，6个人的时候，最大日交易量达100亿美金。

​		全民做市商模式，交易所交易对是由用户把自己的币按照比例，自行添加到交易池，共交易者兑换使用。交易对提供者被称为流动性提供者，赚取交易所产生的交易费。

### 去中心化借贷平台

​		借贷平台解决的事用户资金流动性问题。

#### 		受众人群：

##### 			1. 生活/事业

​						对某一币具有深厚信仰，计划长期持有，就会锁住大部分资金，影响现实世界的生活与事业。

​				可以通过质押如BTC，来借出美元，以供日常消费与公司运作。

##### 			2. 信仰&投机客

​						对某一币如BTC具有长期信仰，但有看到一些其他新项目具有投机时间窗口，则质押BTC借出美元，

​				以投资其他币，此种操作实质产生了杠杆性。

##### 		   3.做空爱好者

​					有做空需求的人，质押美元稳定币，或低波动币，借出看跌B币，然后把借出的币卖掉换成美元，在跌

​				到目标价，低价买回B币进行还款操作。



### 去中心化保险产品

​		![](https://p6.itc.cn/images01/20210906/5a4fab960a2b483db77fa9f6782afce1.jpeg)

​		典型场景如航空险，优势比较明显，保资几乎零损耗，不像传统保险公司那样，不需要为保洁阿姨，企业hr，财务，房租等企业运作的开支。

​		所有买了某款航空险产品的用户的保费，都放在一个合约池子里，产品中有航班属性，程序会通过“预言机”来获取真实世界的航班状态，延误，意外等事件，通过状态变换触发合约的执行，自动理赔。

![](https://inews.gtimg.com/newsapp_bt/0/14925105902/1000)

​		“预言机”是很多区块链场景都需要的一种产品，自身也是一种区块链程序，主要是和现实世界，或夸界交互。

入航班信息，某航空公司提供数据服务，对接“预言机”，为区块链提供航班状态数据，并得到相应的奖励。安全起见一般同一数据会有多家”数据服务商“提供，交叉验证，对”不诚实“数据服务商进行罚款，罚款从数据服务商的保证金里扣除（作为数据服务商是需要质押数字资产充当保证金）。



### 美股交易所

​		与去中心化货币交易所类似，也是一种全民做市商产品。不同的是不是提供币币交易对，而是提供虚拟股票与币的交易对。 

​		游戏规则是这样：平台提供做市UI，为用户可以提供美股做市产品，比如特斯拉。

​		张三想提供100万美金的特斯拉股票进行做市，平台会让其质押150万美金，然后根据特斯拉实价（来自于预言机喂价）计算出股票数量x手股票。平台则会自动铸造x手股票和100万美金的比例，放进“币票池”，即挂牌上市或增发。美股需求者可以自行购买这些产品，股价会通过“预言机”喂价，实时随真实价格波动，波动由那50万保证金来平衡票币比。买卖双方其实不是撮合交易，只是跟池子交易，取走币放进票，或者取走票放进币。

做市商会在交易中获得一定比例的交易费。为了避免股价下跌的损失，做市商可以在真实的美股交易所做空等量的特斯拉股票，以对冲锁定自己做市价值，避免因股价波动造成损失，纯撸交易费。

 

## 区块链3.0

### Web 3.0

​		Web3.0最特别的就是，用户所创造的数字内容，所有权和控制权都归属于用户，用户所创造的价值可以由用户自主选择与他人签订协议进行分配。

​		可以理解为，现在所有的Web2.0 互联网产品，全部变成了基础设施化，现有的互联网公司角色转变成了“基础设施”的“物业”。“物业”可以换，也可以多家物业负责不同的部分。物业按照服务获取基础设施的奖励。

​		优势：所有权，壁垒。壁垒：就像中国互联网圈的二选一，不兼容等。数据以及基础设施本身的所有权，属于所有人，则民主决定技术的走向与拓展。



### 元宇宙

​	Web 3.0 的终极整合方案。数字空间创造n个平行宇宙，生活中几乎所有元素都在里边有所对应。
